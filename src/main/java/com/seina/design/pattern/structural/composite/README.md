## 组合模式

分公司和办事处与总公司的关系，就是部分与整体的关系。

如果想要总公司的人力资源部和财务部的管理功能都可以复用于分公司，这其实就是整体和部分可以被一致对待。

如果把北京总公司当作一棵大树，那么分公司就是这颗书的分支，至于办事处就是更小的分支了，相关的只能部门下面不再有组织结构，所以可以理解为是树叶。

> 组合模式：将对象组合成树形结构以表示'部分-整体'的层次结构。组合模式使得用户对单个对象和组合对象的使用具有一致性。

组合模式定义了几本对象和组合对象的类层次结构，几本对象可以被组合成更复杂的组合对象，而这个对象又可以被组合，这样不断地递归下去，客户代码中，任何用到基本对象的地方都可以使用组合对象了。

用户是不用关心到底处理一个叶节点还是处理一个组合组组件，也就永不着为定义组合而写一些选择判断语句了，可以一致地使用组合结构和单个对象。


### 透明方式和安全方式

- 透明方式：在Component中声明所有用来管理子对象的方法，其中包括add()和remove()等。这样Component接口的所有子类都具有add和remove能力，这样做的好处就是叶节点和枝节点对于外界没有区别，他们具备完全一致的接口，但问题也很明显，因为Leaf类本身不具备add和remove能力，所以实现它是没有意义的。

- 安全方式：也就是是在Component接口中不声明add和remove方法，那么子类的Leaf也就不需要去实现它，而是在Composite声明所有用来管理子类对象的方法，不过由于不够透明，所以树叶和树枝类将不具有相同的接口，客户端调用的时候需要做相应的判断，带来了不便。

### 何时使用

需求中是体现部分与整体层次的结构式，以及你希望用户可以忽略组合对象与单个对象的不同，统一地使用组合结构中的所有对象时，就应该考虑用组合模式了。
